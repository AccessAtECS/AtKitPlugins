(function(){var o=function(){$lib=AtKit.lib();(function(a){function d(a){return typeof a=="object"?a:{top:a,left:a}}var n=a.scrollTo=function(c,e,b){a(window).scrollTo(c,e,b)};n.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1};n.window=function(){return a(window)._scrollable()};a.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&a.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"])==-1)return this;var c=(this.contentWindow||this).document||
this.ownerDocument||this;return a.browser.safari||c.compatMode=="BackCompat"?c.body:c.documentElement})};a.fn.scrollTo=function(c,e,b){typeof e=="object"&&(b=e,e=0);typeof b=="function"&&(b={onAfter:b});c=="max"&&(c=9E9);b=a.extend({},n.defaults,b);e=e||b.speed||b.duration;b.queue=b.queue&&b.axis.length>1;b.queue&&(e/=2);b.offset=d(b.offset);b.over=d(b.over);return this._scrollable().each(function(){function p(a){f.animate(i,e,b.easing,a&&function(){a.call(this,c,b)})}var m=this,f=a(m),h=c,g,i={},
k=f.is("html,body");switch(typeof h){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(h)){h=d(h);break}h=a(h,this);case "object":if(h.is||h.style)g=(h=a(h)).offset()}a.each(b.axis.split(""),function(a,c){var e=c=="x"?"Left":"Top",d=e.toLowerCase(),j="scroll"+e,l=m[j],o=n.max(m,c);g?(i[j]=g[d]+(k?0:l-f.offset()[d]),b.margin&&(i[j]-=parseInt(h.css("margin"+e))||0,i[j]-=parseInt(h.css("border"+e+"Width"))||0),i[j]+=b.offset[d]||0,b.over[d]&&(i[j]+=h[c=="x"?"width":"height"]()*b.over[d])):
(e=h[d],i[j]=e.slice&&e.slice(-1)=="%"?parseFloat(e)/100*o:e);/^\d+$/.test(i[j])&&(i[j]=i[j]<=0?0:Math.min(i[j],o));!a&&b.queue&&(l!=i[j]&&p(b.onAfterFirst),delete i[j])});p(b.onAfter)}).end()};n.max=function(c,e){var b=e=="x"?"Width":"Height",d="scroll"+b;if(!a(c).is("html,body"))return c[d]-a(c)[b.toLowerCase()]();var b="client"+b,m=c.ownerDocument.documentElement,f=c.ownerDocument.body;return Math.max(m[d],f[d])-Math.min(m[b],f[b])}})($lib);var f=[],g=[],k,l;globalFunctions={bindKeypress:function(){$lib(document).keyup(function(a){a.which==
17&&(k=!1)}).keydown(function(a){a.which==17&&(k=!0);a.which==8&&$lib("#asTypeInput").val($lib("#asTypeInput").val().substring(0,$lib("#asTypeInput").val().length-1));if(a.which==13&&k){var d=$lib("#asTypeInput").val();g=[];$lib.each(f,function(a,c){c.html().substring(0,d.length).toLowerCase()==d.toLowerCase()&&g.push(c.get(0))});f=g;a=AtKit.call("locateElements",f);AtKit.message(a,function(){$lib("#facebox a:first").focus()})}else a=String.fromCharCode(a.which),$lib("#asTypeInput").val($lib("#asTypeInput").val()+
a),AtKit.call("selectSingleEl",a)})}};AtKit.addButton("findParagraphs","Find Paragraphs",AtKit.getPluginURL()+"images/document-icon.png",function(){l="h1, h2, h3, h4, h5";var a=AtKit.call("locateElements",$lib(l));AtKit.message(a,function(){$lib("#facebox a:first").focus();AtKit.call("applyCSS","#searchElementsHolder a")})},null,globalFunctions);AtKit.addButton("findLinks","Find Links",AtKit.getPluginURL()+"images/document-export.png",function(){l="a";var a=AtKit.call("locateElements",$lib(l));AtKit.message(a,
function(){$lib("#facebox a:first").focus();AtKit.call("applyCSS","#searchElementsHolder a")})},null,globalFunctions);AtKit.addFn("applyCSS",function(a){$lib(a).attr("style",AtKit.__CSS[a])});AtKit.addFn("selectSingleEl",function(a){$lib("#facebox .content").find("a").each(function(d,f){if($lib(f).text().substring(3,4).toLowerCase()==a.toLowerCase())return $lib(f).focus(),!1})});AtKit.addFn("locateElements",function(a){var d=$lib("<div>",{id:"searchElementsHolder"}),g=$lib("<input />",{type:"text",
id:"asTypeInput",disabled:"disabled"});if(a.length==0)return $lib("<p>",{html:"No elements found"});d.append(g);var c=1;$lib.each(a,function(){var a=$lib("<a>",{href:"#"}),b=$lib(this),g=$lib(b);g.text()!=""&&(a.html(c+". "+g.text()),a.find("img").remove(),a.bind("click",function(){var a=$lib(b).get(0).tagName;if(a=="A"){var c=$lib(b).attr("href");window.location=c}if(a=="H1"||a=="H2"||a=="H3"||a=="H4"||a=="H5")a=b.offset(),$lib.scrollTo(a.top-80,800),b.css("background-color","red"),b.animate({opacity:0.1},
500,function(){b.animate({opacity:1},500,function(){b.animate({opacity:0.1},500,function(){b.animate({opacity:1},500,function(){b.css("background-color","")})})})})}),f.push(b),d.append($lib("<p>").html(a.wrap("<p>").get(0))),c++)});return d});globalFunctions.bindKeypress();AtKit.setCSS("#searchElementsHolder a","font-size: 18px")};typeof window.AtKit=="undefined"?(window.AtKitLoaded=function(){var f=null;this.subscribe=function(g){f=g};this.fire=function(g,k){f!=null&&f(g,k)}},window.AtKitLoaded=
new AtKitLoaded,window.AtKitLoaded.subscribe(function(){AtKit.registerPlugin("findEl",o)})):AtKit.registerPlugin("findEl",o)})();
